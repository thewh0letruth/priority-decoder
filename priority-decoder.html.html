<link rel="apple-touch-icon" href="priority_decoder_icon_1024.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- iPhone 16 Pro Splash -->
<link rel="apple-touch-startup-image"
      href="priority_decoder_splash_1170x2532.png"
      media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3)">


<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hannah‚Äôs Priority Decoder</title>
  <style>
    :root{
      --bg:#0b1020; --card:#121a33; --muted:#9fb0ff; --text:#f2f5ff;
      --accent:#6ae4ff; --good:#5dffb5; --warn:#ffd36a; --bad:#ff6a8b;
      --line:rgba(255,255,255,.10);
      --radius:18px;
    }
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 0%, #1a2a66 0%, var(--bg) 55%) fixed;
      color:var(--text);
      display:flex; min-height:100vh; align-items:center; justify-content:center;
      padding:18px;
    }
    .wrap{ width:min(720px, 100%); }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      overflow:hidden;
    }
    header{
      padding:18px 18px 14px;
      border-bottom:1px solid var(--line);
      display:flex; gap:14px; align-items:flex-start;
    }
    .badge{
      background: rgba(106,228,255,.12);
      border:1px solid rgba(106,228,255,.25);
      color: var(--accent);
      padding:7px 10px;
      border-radius: 999px;
      font-weight:600;
      font-size:12px;
      letter-spacing:.2px;
      white-space:nowrap;
      margin-top:2px;
    }
    h1{ font-size:18px; margin:0; line-height:1.25; }
    .sub{ margin:6px 0 0; color:rgba(242,245,255,.75); font-size:13px; line-height:1.45; }
    .content{ padding:16px 18px 18px; }
    .progress{
      display:flex; gap:8px; margin:2px 0 14px;
    }
    .dot{
      height:8px; flex:1;
      background: rgba(255,255,255,.08);
      border:1px solid var(--line);
      border-radius:999px;
      overflow:hidden;
      position:relative;
    }
    .dot > i{
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(106,228,255,.25), rgba(106,228,255,.65));
      transform: translateX(-100%);
      transition: transform .28s ease;
    }
    .dot.active > i{ transform: translateX(0); }
    .q{
      border:1px solid var(--line);
      background: rgba(18,26,51,.55);
      border-radius: var(--radius);
      padding:14px;
    }
    .qtitle{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin:0 0 10px;
    }
    .qtitle b{ font-size:15px; }
    .pill{
      font-size:12px; color:rgba(242,245,255,.72);
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(255,255,255,.04);
      white-space:nowrap;
    }
    .choices{ display:grid; gap:10px; margin-top:10px; }
    button{
      all:unset;
      cursor:pointer;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      display:flex; gap:10px; align-items:flex-start;
    }
    button:hover{ background: rgba(255,255,255,.07); border-color: rgba(106,228,255,.25); }
    button:active{ transform: scale(.995); }
    .emoji{ width:22px; text-align:center; margin-top:1px; }
    .btntxt{ display:flex; flex-direction:column; gap:2px; }
    .btntxt span{ font-weight:700; }
    .btntxt small{ color:rgba(242,245,255,.72); font-size:12px; line-height:1.35; }
    .trail{
      margin-top:12px;
      color:rgba(242,245,255,.70);
      font-size:12px;
      display:flex; flex-wrap:wrap; gap:8px;
    }
    .crumb{
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      padding:6px 9px;
      border-radius: 999px;
    }
    .result{
      border:1px solid var(--line);
      background: rgba(18,26,51,.55);
      border-radius: var(--radius);
      padding:14px;
    }
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:800;
      letter-spacing:.2px;
      border:1px solid var(--line);
    }
    .tag.good{ color: #072514; background: rgba(93,255,181,.9); border-color: rgba(93,255,181,.9); }
    .tag.warn{ color: #2a1d05; background: rgba(255,211,106,.95); border-color: rgba(255,211,106,.95); }
    .tag.bad{  color: #2a0712; background: rgba(255,106,139,.95); border-color: rgba(255,106,139,.95); }
    .tag.neutral{ color: var(--accent); background: rgba(106,228,255,.12); border-color: rgba(106,228,255,.25); }
    .actions{
      margin-top:10px;
      display:grid; gap:10px;
    }
    .actions .line{
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(255,255,255,.18);
      color:rgba(242,245,255,.86);
      background: rgba(255,255,255,.03);
      font-size:13px;
      line-height:1.4;
    }
    .row{
      display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; justify-content:space-between; align-items:center;
    }
    .linkbtn{
      cursor:pointer;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(106,228,255,.28);
      background: rgba(106,228,255,.10);
      color: var(--accent);
      font-weight:700;
      font-size:13px;
    }
    .linkbtn:hover{ background: rgba(106,228,255,.14); }
    .footer{
      margin-top:10px;
      color:rgba(242,245,255,.55);
      font-size:12px;
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
    }
    .quote{
      font-style:italic;
      color:rgba(242,245,255,.70);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="Priority Decoder">
      <header>
        <div class="badge">60-Second Reset</div>
        <div>
          <h1>Hannah‚Äôs Priority Decoder</h1>
          <p class="sub">A quick ‚Äúis this real or just loud?‚Äù filter. Built for busy days. Built by someone who likes you a lot.</p>
        </div>
      </header>

      <div class="content">
        <div class="progress" id="progress"></div>

        <div id="screen"></div>

        <div class="footer">
          <span class="quote">‚ÄúLoud ‚â† Important. Done > Perfect.‚Äù</span>
          <span>Tip: run this when your brain says ‚Äúeverything is urgent.‚Äù</span>
        </div>
      </div>
    </div>
  </div>

<script>
/**
 * Decision tree notes:
 * - Keep it playful, not patronizing.
 * - Outcomes: DO NOW, SCHEDULE, DELEGATE/ASK, IGNORE/WAIT, DECOMPRESS FIRST.
 */

const steps = [
  {
    id: "impact_today",
    q: "Does this affect a resident/owner, safety, money, or an active deadline today?",
    pill: "Reality check",
    choices: [
      { label: "Yes, it‚Äôs real impact", emoji:"üö®", desc:"Someone gets hurt, stuck, or legitimately blocked.", next:"ownership" },
      { label: "No, it‚Äôs just loud", emoji:"üì£", desc:"It *feels* urgent but nothing breaks today.", next:"seven_day" }
    ]
  },
  {
    id: "seven_day",
    q: "Will this matter in 7 days?",
    pill: "Time filter",
    choices: [
      { label: "Yes, it‚Äôll still matter", emoji:"üìÜ", desc:"It‚Äôs meaningful‚Ä¶ just not immediate.", next:"ownership" },
      { label: "Nope, future-me won‚Äôt care", emoji:"ü´ß", desc:"This is probably noise or perfectionism bait.", next:"noise_type" }
    ]
  },
  {
    id: "ownership",
    q: "Is this actually *your* responsibility to own end-to-end?",
    pill: "Scope filter",
    choices: [
      { label: "Yes, mine", emoji:"üß©", desc:"It belongs with me right now.", next:"perfection" },
      { label: "Not really / shared", emoji:"ü§ù", desc:"Someone else should carry part (or all) of it.", next:"delegate_style" }
    ]
  },
  {
    id: "perfection",
    q: "Does this require perfection‚Ä¶ or just completion?",
    pill: "Energy saver",
    choices: [
      { label: "Completion (done is enough)", emoji:"‚úÖ", desc:"Ship the smallest correct version.", next:"out_do_now" },
      { label: "Perfection (danger zone)", emoji:"üé≠", desc:"This is where time disappears.", next:"perfection_guard" }
    ]
  },
  {
    id: "perfection_guard",
    q: "Is the ‚Äòperfect‚Äô version worth the cost in time/energy today?",
    pill: "Cost filter",
    choices: [
      { label: "No. I‚Äôm choosing done.", emoji:"üõü", desc:"Protect your bandwidth.", next:"out_do_now" },
      { label: "Yes, it‚Äôs worth it (rare)", emoji:"üéØ", desc:"Only if consequences are real.", next:"out_focus_block" }
    ]
  },
  {
    id: "delegate_style",
    q: "What‚Äôs the cleanest move?",
    pill: "Hand-off",
    choices: [
      { label: "Delegate / assign it", emoji:"üì§", desc:"Put it in the right hands.", next:"out_delegate" },
      { label: "Clarify & set a boundary", emoji:"üß±", desc:"Get missing info or reset expectations.", next:"out_boundary" }
    ]
  },
  {
    id: "noise_type",
    q: "What kind of noise is it?",
    pill: "Name it",
    choices: [
      { label: "Perception / politics / optics", emoji:"üéüÔ∏è", desc:"Looks urgent. Isn‚Äôt.", next:"out_schedule" },
      { label: "Random interruption", emoji:"ü™Å", desc:"Not aligned to priorities.", next:"out_ignore" }
    ]
  }
];

const outcomes = {
  out_do_now: {
    tag: { kind:"good", text:"DO NOW (calmly)" },
    title: "Real priority. Simple execution.",
    actions: [
      "Write the next physical step (one sentence).",
      "Do 10 minutes. Reassess. Repeat if needed.",
      "No multitasking. No perfection. Just progress."
    ],
    closer: "You‚Äôre not behind. You‚Äôre handling what matters."
  },
  out_focus_block: {
    tag: { kind:"warn", text:"FOCUS BLOCK" },
    title: "If it truly needs ‚Äòperfect,‚Äô protect the time.",
    actions: [
      "Create a 30‚Äì60 minute focus block (calendar or timer).",
      "Silence notifications. One task, one finish line.",
      "Stop when the block ends. Ship the best within constraints."
    ],
    closer: "Perfect is expensive. Spend it only where it pays you back."
  },
  out_delegate: {
    tag: { kind:"good", text:"DELEGATE" },
    title: "This belongs with someone else (or shared).",
    actions: [
      "Send a clean hand-off message: What + Why + When.",
      "Attach context once. Don‚Äôt re-explain in 5 threads.",
      "Mentally drop it after the hand-off (that‚Äôs the point)."
    ],
    closer: "Protecting your bandwidth is protecting your work quality."
  },
  out_boundary: {
    tag: { kind:"warn", text:"BOUNDARY" },
    title: "Clarify the ask. Reset the urgency.",
    actions: [
      "Ask: ‚ÄòWhat‚Äôs the deadline and what breaks if it‚Äôs tomorrow?‚Äô",
      "Offer 2 options: ‚ÄòI can do A today or B tomorrow.‚Äô",
      "If it‚Äôs not urgent: schedule it and move on."
    ],
    closer: "Someone else‚Äôs stress doesn‚Äôt get to draft your nervous system."
  },
  out_schedule: {
    tag: { kind:"neutral", text:"SCHEDULE IT" },
    title: "This matters‚Ä¶ just not right now.",
    actions: [
      "Pick a slot: today later / tomorrow / this week.",
      "Write one line: ‚ÄòDone when ____.‚Äô",
      "Close the loop: let people know when to expect it."
    ],
    closer: "Scheduling is a decision. Decisions create calm."
  },
  out_ignore: {
    tag: { kind:"bad", text:"IGNORE / WAIT" },
    title: "This is noise. Let it starve.",
    actions: [
      "Don‚Äôt touch it for 24 hours (if nothing breaks, it wasn‚Äôt urgent).",
      "Mute/snooze if possible. Protect your attention.",
      "If it resurfaces, route it properly (delegate or schedule)."
    ],
    closer: "You don‚Äôt have to chase every ping to be excellent."
  }
};

let path = [];
let currentId = steps[0].id;

function renderProgress(){
  const el = document.getElementById("progress");
  el.innerHTML = "";
  const total = 5; // keep UI simple even though tree varies
  const filled = Math.min(path.length + 1, total);
  for(let i=0;i<total;i++){
    const dot = document.createElement("div");
    dot.className = "dot" + (i < filled ? " active" : "");
    const inner = document.createElement("i");
    dot.appendChild(inner);
    el.appendChild(dot);
  }
}

function renderQuestion(step){
  renderProgress();
  const screen = document.getElementById("screen");
  const crumbs = path.map(p => `<span class="crumb"></span>`).join("");
  screen.innerHTML = `
    <div class="q">
      <div class="qtitle">
        <b></b>
        <span class="pill"></span>
      </div>
      <div class="choices">
        " data-label="">
            <div class="emoji"></div>
            <div class="btntxt">
              <span></span>
              <small></small>
            </div>
          </button>
        `).join("")}
      </div>
      <div class="trail" aria-label="Your path so far">
        
      </div>
      <div class="row">
        <button class="linkbtn" type="button" id="restart">Restart</button>
        <button class="linkbtn" type="button" id="share">Copy a cute recap</button>
      </div>
    </div>
  `;

  screen.querySelectorAll("button[data-next]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const label = btn.getAttribute("data-label");
      path.push(label);
      const next = btn.getAttribute("data-next");
      go(next);
    });
  });

  document.getElementById("restart").addEventListener("click", reset);
  document.getElementById("share").addEventListener("click", copyRecap);
}

function renderOutcome(out){
  renderProgress();
  const screen = document.getElementById("screen");
  const crumbs = path.map(p => `<span class="crumb"></span>`).join("");
  screen.innerHTML = `
    <div class="result">
      <div style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;">
        <span class="tag "></span>
        <span class="pill">Result</span>
      </div>
      <h2 style="margin:12px 0 6px; font-size:16px;"></h2>
      <div class="actions">
        </div>`).join("")}
      </div>
      <div style="margin-top:10px; color:rgba(242,245,255,.80); font-weight:700;">
        
      </div>

      <div class="trail" style="margin-top:14px;">
        
      </div>

      <div class="row">
        <button class="linkbtn" type="button" id="restart">Run again</button>
        <button class="linkbtn" type="button" id="share">Copy a cute recap</button>
      </div>
    </div>
  `;
  document.getElementById("restart").addEventListener("click", reset);
  document.getElementById("share").addEventListener("click", copyRecap);
}

function go(nextId){
  // Outcome
  if(outcomes[nextId]){
    currentId = nextId;
    renderOutcome(outcomes[nextId]);
    return;
  }
  // Step
  const step = steps.find(s=>s.id === nextId);
  if(!step){ reset(); return; }
  currentId = nextId;
  renderQuestion(step);
}

function reset(){
  path = [];
  currentId = steps[0].id;
  go(currentId);
}

async function copyRecap(){
  const title = "Priority Decoder Recap";
  const recap = path.length ? `I ran the Priority Decoder and landed on: \nPath: \n\n(Loud ‚â† Important. Done > Perfect.)`
                            : "I opened the Priority Decoder. Running it now üòÑ";
  try{
    await navigator.clipboard.writeText(recap);
    toast("Copied. Send it to Josh üòÑ");
  }catch{
    toast("Couldn‚Äôt auto-copy. (Browser blocked it.)");
  }
}

function finalLabel(){
  // If we‚Äôre on outcome, use that, otherwise ‚Äúin progress‚Äù
  if(outcomes[currentId]) return outcomes[currentId].tag.text;
  return "IN PROGRESS";
}

let toastTimer;
function toast(msg){
  clearTimeout(toastTimer);
  let t = document.getElementById("toast");
  if(!t){
    t = document.createElement("div");
    t.id="toast";
    t.style.position="fixed";
    t.style.left="50%";
    t.style.bottom="18px";
    t.style.transform="translateX(-50%)";
    t.style.background="rgba(0,0,0,.75)";
    t.style.color="#fff";
    t.style.padding="10px 12px";
    t.style.border="1px solid rgba(255,255,255,.18)";
    t.style.borderRadius="999px";
    t.style.fontSize="13px";
    t.style.zIndex="9999";
    t.style.maxWidth="92vw";
    t.style.textAlign="center";
    document.body.appendChild(t);
  }
  t.textContent = msg;
  t.style.opacity="1";
  toastTimer = setTimeout(()=>{ t.style.opacity="0"; }, 1700);
}

function escapeHtml(str){
  return String(str).replace(/[&<>"']/g, s=>({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[s]));
}
function escapeAttr(str){
  return String(str).replace(/"/g,'&quot;');
}

// init
reset();
</script>
</body>
</html>